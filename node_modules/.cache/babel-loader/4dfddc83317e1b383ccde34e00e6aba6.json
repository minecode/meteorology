{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fhenriques\\\\Documents\\\\Rep\\\\fe\\\\src\\\\components\\\\Map\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport Portugal from './portugal';\nimport { RadioSVGMap } from 'react-svg-map';\nimport './style.scss';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { get } from '../../services/api';\nimport Forecast from '../Forecast';\nexport default function Map() {\n  const [tooltipStyle, setToolTipStyle] = useState({\n    display: 'none'\n  });\n  const [pointedLocation, setPointedLocation] = useState(null);\n  const [error, setError] = useState(false);\n  const dispatch = useDispatch();\n  const index = useSelector(state => {\n    return state.ipma.mapDay;\n  });\n  const regions = useSelector(state => {\n    return state.ipma.regions;\n  });\n  const locationCodes = {\n    Aveiro: 1010500,\n    Beja: 1020500,\n    Braga: 1030300,\n    Bragança: 1040200,\n    'Castelo Branco': 1050200,\n    Coimbra: 1060300,\n    Évora: 1070500,\n    Faro: 1080500,\n    Guarda: 1090700,\n    Leiria: 1100900,\n    Lisboa: 1110600,\n    Portalegre: 1121400,\n    Porto: 1131200,\n    Santarém: 1141600,\n    Setúbal: 1151200,\n    'Viana do Castelo': 1160900,\n    'Vila Real': 1171400,\n    Viseu: 1182300\n  };\n\n  function getLocationName(event) {\n    return event.target.attributes.name.value;\n  }\n\n  function getLocationInfo(pointedLocation, updateForecast = false) {\n    get(`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${locationCodes[pointedLocation]}.json`, {}).then(data => {\n      setPointedLocation(data.data[index]);\n\n      if (updateForecast) {\n        dispatch({\n          type: 'SET_FORECAST',\n          forecast: data\n        });\n        dispatch({\n          type: 'SET_LOCAL',\n          local: pointedLocation\n        });\n      }\n    }).catch(error => {\n      setError(true);\n    });\n  }\n\n  function handleChange(selectedNode) {\n    getLocationInfo(selectedNode.attributes.name.value, true);\n  }\n\n  function handleLocationMouseOver(event) {\n    const pointedLocation = getLocationName(event);\n    getLocationInfo(pointedLocation);\n  }\n\n  function handleLocationMouseOut() {\n    setPointedLocation(null);\n    setToolTipStyle({\n      display: 'none'\n    });\n  }\n\n  function handleLocationMouseMove(event) {\n    const tooltipStyle = {\n      display: 'block',\n      top: event.clientY + 20,\n      left: event.clientX - 140\n    };\n    setToolTipStyle(tooltipStyle);\n  }\n\n  async function asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  async function storeData() {\n    console.log(Object.values(locationCodes));\n    await asyncForEach(Object.values(locationCodes), function (code) {\n      console.log(code);\n    }); // const temp = get(\n    // \t`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${\n    // \t\tlocationCodes[el.name]\n    // \t}.json`,\n    // \t{}\n    // )\n    // \t.then((data) => {\n    // \t\tlet str = '';\n    // \t\tif (parseInt(data.data[index].precipitaProb) < 10) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat0';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 20) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_10';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 30) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_20';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 40) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_30';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 50) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_40';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 60) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_50';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 70) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_60';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 80) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_70';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 90) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_80';\n    // \t\t} else if (parseInt(data.data[index].precipitaProb) < 100) {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_90';\n    // \t\t} else {\n    // \t\t\tstr = 'svg-map__location svg-map__location--heat_red_100';\n    // \t\t}\n    // \t\treturn str;\n    // \t})\n    // \t.catch((error) => {\n    // \t\treturn 'svg-map__location svg-map__location--heat0';\n    // \t});\n  }\n\n  useEffect(() => {\n    storeData();\n  }, []);\n  return /*#__PURE__*/React.createElement(\"article\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 3\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'svg__block__map--pt',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 4\n    }\n  }, /*#__PURE__*/React.createElement(RadioSVGMap, {\n    map: Portugal,\n    locationClassName: el => {\n      return 'svg-map__location svg-map__location--heat0';\n      const temp = get(`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${locationCodes[el.name]}.json`, {}).then(data => {\n        let str = '';\n\n        if (parseInt(data.data[index].precipitaProb) < 10) {\n          str = 'svg-map__location svg-map__location--heat0';\n        } else if (parseInt(data.data[index].precipitaProb) < 20) {\n          str = 'svg-map__location svg-map__location--heat_red_10';\n        } else if (parseInt(data.data[index].precipitaProb) < 30) {\n          str = 'svg-map__location svg-map__location--heat_red_20';\n        } else if (parseInt(data.data[index].precipitaProb) < 40) {\n          str = 'svg-map__location svg-map__location--heat_red_30';\n        } else if (parseInt(data.data[index].precipitaProb) < 50) {\n          str = 'svg-map__location svg-map__location--heat_red_40';\n        } else if (parseInt(data.data[index].precipitaProb) < 60) {\n          str = 'svg-map__location svg-map__location--heat_red_50';\n        } else if (parseInt(data.data[index].precipitaProb) < 70) {\n          str = 'svg-map__location svg-map__location--heat_red_60';\n        } else if (parseInt(data.data[index].precipitaProb) < 80) {\n          str = 'svg-map__location svg-map__location--heat_red_70';\n        } else if (parseInt(data.data[index].precipitaProb) < 90) {\n          str = 'svg-map__location svg-map__location--heat_red_80';\n        } else if (parseInt(data.data[index].precipitaProb) < 100) {\n          str = 'svg-map__location svg-map__location--heat_red_90';\n        } else {\n          str = 'svg-map__location svg-map__location--heat_red_100';\n        }\n\n        return str;\n      }).catch(error => {\n        return 'svg-map__location svg-map__location--heat0';\n      });\n      return temp;\n    },\n    onLocationMouseOver: handleLocationMouseOver,\n    onLocationMouseOut: handleLocationMouseOut,\n    onLocationMouseMove: handleLocationMouseMove,\n    onChange: handleChange,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 5\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"svg__block__map__tooltip\",\n    style: tooltipStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 241,\n      columnNumber: 5\n    }\n  }, pointedLocation && /*#__PURE__*/React.createElement(Forecast, {\n    pointedLocation: pointedLocation,\n    style: {\n      backgroundColor: '#21255690'\n    },\n    sm: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 7\n    }\n  }))));\n}","map":{"version":3,"sources":["C:/Users/fhenriques/Documents/Rep/fe/src/components/Map/index.js"],"names":["React","useState","useEffect","Portugal","RadioSVGMap","useDispatch","useSelector","get","Forecast","Map","tooltipStyle","setToolTipStyle","display","pointedLocation","setPointedLocation","error","setError","dispatch","index","state","ipma","mapDay","regions","locationCodes","Aveiro","Beja","Braga","Bragança","Coimbra","Évora","Faro","Guarda","Leiria","Lisboa","Portalegre","Porto","Santarém","Setúbal","Viseu","getLocationName","event","target","attributes","name","value","getLocationInfo","updateForecast","then","data","type","forecast","local","catch","handleChange","selectedNode","handleLocationMouseOver","handleLocationMouseOut","handleLocationMouseMove","top","clientY","left","clientX","asyncForEach","array","callback","length","storeData","console","log","Object","values","code","el","temp","str","parseInt","precipitaProb","backgroundColor"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Portugal from './portugal';\r\nimport { RadioSVGMap } from 'react-svg-map';\r\nimport './style.scss';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { get } from '../../services/api';\r\nimport Forecast from '../Forecast';\r\n\r\nexport default function Map() {\r\n\tconst [tooltipStyle, setToolTipStyle] = useState({ display: 'none' });\r\n\tconst [pointedLocation, setPointedLocation] = useState(null);\r\n\tconst [error, setError] = useState(false);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst index = useSelector((state) => {\r\n\t\treturn state.ipma.mapDay;\r\n\t});\r\n\r\n\tconst regions = useSelector((state) => {\r\n\t\treturn state.ipma.regions;\r\n\t});\r\n\r\n\tconst locationCodes = {\r\n\t\tAveiro: 1010500,\r\n\t\tBeja: 1020500,\r\n\t\tBraga: 1030300,\r\n\t\tBragança: 1040200,\r\n\t\t'Castelo Branco': 1050200,\r\n\t\tCoimbra: 1060300,\r\n\t\tÉvora: 1070500,\r\n\t\tFaro: 1080500,\r\n\t\tGuarda: 1090700,\r\n\t\tLeiria: 1100900,\r\n\t\tLisboa: 1110600,\r\n\t\tPortalegre: 1121400,\r\n\t\tPorto: 1131200,\r\n\t\tSantarém: 1141600,\r\n\t\tSetúbal: 1151200,\r\n\t\t'Viana do Castelo': 1160900,\r\n\t\t'Vila Real': 1171400,\r\n\t\tViseu: 1182300,\r\n\t};\r\n\r\n\tfunction getLocationName(event) {\r\n\t\treturn event.target.attributes.name.value;\r\n\t}\r\n\r\n\tfunction getLocationInfo(pointedLocation, updateForecast = false) {\r\n\t\tget(\r\n\t\t\t`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${locationCodes[pointedLocation]}.json`,\r\n\t\t\t{}\r\n\t\t)\r\n\t\t\t.then((data) => {\r\n\t\t\t\tsetPointedLocation(data.data[index]);\r\n\t\t\t\tif (updateForecast) {\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: 'SET_FORECAST',\r\n\t\t\t\t\t\tforecast: data,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tdispatch({\r\n\t\t\t\t\t\ttype: 'SET_LOCAL',\r\n\t\t\t\t\t\tlocal: pointedLocation,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch((error) => {\r\n\t\t\t\tsetError(true);\r\n\t\t\t});\r\n\t}\r\n\r\n\tfunction handleChange(selectedNode) {\r\n\t\tgetLocationInfo(selectedNode.attributes.name.value, true);\r\n\t}\r\n\r\n\tfunction handleLocationMouseOver(event) {\r\n\t\tconst pointedLocation = getLocationName(event);\r\n\r\n\t\tgetLocationInfo(pointedLocation);\r\n\t}\r\n\r\n\tfunction handleLocationMouseOut() {\r\n\t\tsetPointedLocation(null);\r\n\t\tsetToolTipStyle({ display: 'none' });\r\n\t}\r\n\r\n\tfunction handleLocationMouseMove(event) {\r\n\t\tconst tooltipStyle = {\r\n\t\t\tdisplay: 'block',\r\n\t\t\ttop: event.clientY + 20,\r\n\t\t\tleft: event.clientX - 140,\r\n\t\t};\r\n\t\tsetToolTipStyle(tooltipStyle);\r\n\t}\r\n\r\n\tasync function asyncForEach(array, callback) {\r\n\t\tfor (let index = 0; index < array.length; index++) {\r\n\t\t\tawait callback(array[index], index, array);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function storeData() {\r\n\t\tconsole.log(Object.values(locationCodes));\r\n\t\tawait asyncForEach(Object.values(locationCodes), function (code) {\r\n\t\t\tconsole.log(code);\r\n\t\t});\r\n\t\t// const temp = get(\r\n\t\t// \t`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${\r\n\t\t// \t\tlocationCodes[el.name]\r\n\t\t// \t}.json`,\r\n\t\t// \t{}\r\n\t\t// )\r\n\t\t// \t.then((data) => {\r\n\t\t// \t\tlet str = '';\r\n\t\t// \t\tif (parseInt(data.data[index].precipitaProb) < 10) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat0';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 20) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_10';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 30) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_20';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 40) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_30';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 50) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_40';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 60) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_50';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 70) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_60';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 80) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_70';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 90) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_80';\r\n\t\t// \t\t} else if (parseInt(data.data[index].precipitaProb) < 100) {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_90';\r\n\t\t// \t\t} else {\r\n\t\t// \t\t\tstr = 'svg-map__location svg-map__location--heat_red_100';\r\n\t\t// \t\t}\r\n\t\t// \t\treturn str;\r\n\t\t// \t})\r\n\t\t// \t.catch((error) => {\r\n\t\t// \t\treturn 'svg-map__location svg-map__location--heat0';\r\n\t\t// \t});\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tstoreData();\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<article>\r\n\t\t\t<div className={'svg__block__map--pt'}>\r\n\t\t\t\t<RadioSVGMap\r\n\t\t\t\t\tmap={Portugal}\r\n\t\t\t\t\tlocationClassName={(el) => {\r\n\t\t\t\t\t\treturn 'svg-map__location svg-map__location--heat0';\r\n\r\n\t\t\t\t\t\tconst temp = get(\r\n\t\t\t\t\t\t\t`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${\r\n\t\t\t\t\t\t\t\tlocationCodes[el.name]\r\n\t\t\t\t\t\t\t}.json`,\r\n\t\t\t\t\t\t\t{}\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t.then((data) => {\r\n\t\t\t\t\t\t\t\tlet str = '';\r\n\t\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t10\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat0';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t20\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_10';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t30\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_20';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t40\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_30';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t50\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_40';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t60\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_50';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t70\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_60';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t80\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_70';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t90\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_80';\r\n\t\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\t\tparseInt(data.data[index].precipitaProb) <\r\n\t\t\t\t\t\t\t\t\t100\r\n\t\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_90';\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tstr =\r\n\t\t\t\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_100';\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn str;\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t.catch((error) => {\r\n\t\t\t\t\t\t\t\treturn 'svg-map__location svg-map__location--heat0';\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\treturn temp;\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tonLocationMouseOver={handleLocationMouseOver}\r\n\t\t\t\t\tonLocationMouseOut={handleLocationMouseOut}\r\n\t\t\t\t\tonLocationMouseMove={handleLocationMouseMove}\r\n\t\t\t\t\tonChange={handleChange}\r\n\t\t\t\t/>\r\n\t\t\t\t<div className='svg__block__map__tooltip' style={tooltipStyle}>\r\n\t\t\t\t\t{pointedLocation && (\r\n\t\t\t\t\t\t<Forecast\r\n\t\t\t\t\t\t\tpointedLocation={pointedLocation}\r\n\t\t\t\t\t\t\tstyle={{ backgroundColor: '#21255690' }}\r\n\t\t\t\t\t\t\tsm\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t)}\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</article>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}