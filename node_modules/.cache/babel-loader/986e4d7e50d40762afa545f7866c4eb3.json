{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\fhenriques\\\\Documents\\\\Rep\\\\fe\\\\src\\\\components\\\\Map\\\\index.js\";\nimport React, { useState, useEffect } from 'react';\nimport Portugal from './portugal';\nimport { RadioSVGMap } from 'react-svg-map';\nimport './style.scss';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { get } from '../../services/api';\nimport Forecast from '../Forecast';\nimport { MapDiv, Column, Row } from '../../style';\nimport { locationCodes } from '../../utils';\nexport default function Map() {\n  const [tooltipStyle, setToolTipStyle] = useState({\n    display: 'none'\n  });\n  const [pointedLocation, setPointedLocation] = useState(null);\n  const [error, setError] = useState(false);\n  const [probabPrecipit, setProbabPrecipit] = useState(null);\n  const [tempMin, setTempMin] = useState(null);\n  const [tempMax, setTempMax] = useState(null);\n  const dispatch = useDispatch();\n  const index = useSelector(state => {\n    return state.ipma.mapDay;\n  });\n  const type = useSelector(state => {\n    return state.ipma.typeView;\n  });\n\n  async function asyncForEach(array, callback) {\n    for (let index = 0; index < array.length; index++) {\n      await callback(array[index], index, array);\n    }\n  }\n\n  async function storeData() {\n    const tempObjectPrecipit = {};\n    const tempObjectMin = {};\n    const tempObjectMax = {};\n    await asyncForEach(Object.keys(locationCodes), async function (city) {\n      const temp = await get(`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${locationCodes[city]}.json`, {}).then(data => {\n        let precipt_str = '';\n        let min_str = '';\n        let max_str = '';\n\n        if (parseInt(data.data[index].precipitaProb) < 10) {\n          precipt_str = 'svg-map__location svg-map__location--heat0';\n        } else if (parseInt(data.data[index].precipitaProb) < 20) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_10';\n        } else if (parseInt(data.data[index].precipitaProb) < 30) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_20';\n        } else if (parseInt(data.data[index].precipitaProb) < 40) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_30';\n        } else if (parseInt(data.data[index].precipitaProb) < 50) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_40';\n        } else if (parseInt(data.data[index].precipitaProb) < 60) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_50';\n        } else if (parseInt(data.data[index].precipitaProb) < 70) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_60';\n        } else if (parseInt(data.data[index].precipitaProb) < 80) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_70';\n        } else if (parseInt(data.data[index].precipitaProb) < 90) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_80';\n        } else if (parseInt(data.data[index].precipitaProb) < 100) {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_90';\n        } else {\n          precipt_str = 'svg-map__location svg-map__location--heat_blue_100';\n        }\n\n        if (parseInt(data.data[index].tMin) < -15) {\n          min_str = 'svg-map__location svg-map__location--heat0';\n        } else if (parseInt(data.data[index].tMin) < -12) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_10';\n        } else if (parseInt(data.data[index].tMin) < -8) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_20';\n        } else if (parseInt(data.data[index].tMin) < -3) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_30';\n        } else if (parseInt(data.data[index].tMin) < 0) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_40';\n        } else if (parseInt(data.data[index].tMin) < 3) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_50';\n        } else if (parseInt(data.data[index].tMin) < 5) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_60';\n        } else if (parseInt(data.data[index].tMin) < 8) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_70';\n        } else if (parseInt(data.data[index].tMin) < 12) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_80';\n        } else if (parseInt(data.data[index].tMin) < 15) {\n          min_str = 'svg-map__location svg-map__location--heat_blue_90';\n        } else {\n          min_str = 'svg-map__location svg-map__location--heat_blue_100';\n        }\n\n        if (parseInt(data.data[index].tMax) < 5) {\n          max_str = 'svg-map__location svg-map__location--heat0';\n        } else if (parseInt(data.data[index].tMax) < 10) {\n          max_str = 'svg-map__location svg-map__location--heat_red_10';\n        } else if (parseInt(data.data[index].tMax) < 15) {\n          max_str = 'svg-map__location svg-map__location--heat_red_20';\n        } else if (parseInt(data.data[index].tMax) < 20) {\n          max_str = 'svg-map__location svg-map__location--heat_red_30';\n        } else if (parseInt(data.data[index].tMax) < 22) {\n          max_str = 'svg-map__location svg-map__location--heat_red_40';\n        } else if (parseInt(data.data[index].tMax) < 25) {\n          max_str = 'svg-map__location svg-map__location--heat_red_50';\n        } else if (parseInt(data.data[index].tMax) < 28) {\n          max_str = 'svg-map__location svg-map__location--heat_red_60';\n        } else if (parseInt(data.data[index].tMax) < 30) {\n          max_str = 'svg-map__location svg-map__location--heat_red_70';\n        } else if (parseInt(data.data[index].tMax) < 32) {\n          max_str = 'svg-map__location svg-map__location--heat_red_80';\n        } else if (parseInt(data.data[index].tMax) < 35) {\n          max_str = 'svg-map__location svg-map__location--heat_red_90';\n        } else {\n          max_str = 'svg-map__location svg-map__location--heat_red_100';\n        }\n\n        return [precipt_str, min_str, max_str];\n      }).catch(error => {\n        return 'svg-map__location svg-map__location--heat0';\n      });\n      tempObjectPrecipit[city] = temp[0];\n      tempObjectMin[city] = temp[1];\n      tempObjectMax[city] = temp[2];\n    });\n    setProbabPrecipit(tempObjectPrecipit);\n    setTempMin(tempObjectMin);\n    setTempMax(tempObjectMax);\n  }\n\n  useEffect(() => {\n    storeData();\n  }, [index]);\n  return /*#__PURE__*/React.createElement(MapDiv, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 171,\n      columnNumber: 3\n    }\n  }, probabPrecipit && tempMin && tempMax && /*#__PURE__*/React.createElement(Column, {\n    style: {\n      alignItems: 'center'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: 'svg__block__map--pt',\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(RadioSVGMap, {\n    map: Portugal,\n    locationClassName: el => {\n      if (type == 'precipit') {\n        return probabPrecipit[el.name];\n      } else if (type == 'tMin') {\n        return tempMin[el.name];\n      } else {\n        return tempMax[el.name];\n      }\n    },\n    onLocationMouseOver: event => {\n      handleLocationMouseOver(event, setPointedLocation, dispatch);\n    },\n    onLocationMouseOut: () => {\n      handleLocationMouseOut(setPointedLocation, setToolTipStyle);\n    },\n    onLocationMouseMove: event => {\n      handleLocationMouseMove(event, setToolTipStyle);\n    },\n    onChange: selectedNode => {\n      handleChange(selectedNode, setPointedLocation, dispatch);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"svg__block__map__tooltip\",\n    style: tooltipStyle,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 7\n    }\n  }, pointedLocation && /*#__PURE__*/React.createElement(Forecast, {\n    pointedLocation: pointedLocation,\n    style: {\n      backgroundColor: '#21255690'\n    },\n    sm: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    style: {\n      width: '75%',\n      height: 10,\n      borderRadius: 5,\n      background: type === 'tMax' ? 'linear-gradient(to right, #f1f1f1, rgb(255, 11, 11), rgb(87, 0, 0))' : 'linear-gradient(to right, #f1f1f1, rgb(0, 89, 255), rgb(0, 26, 75))',\n      marginTop: 10\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 6\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Column, {\n    style: {\n      marginTop: 15,\n      padding: 0,\n      alignItems: 'flex-start',\n      color: '#f1f1f1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 8\n    }\n  }, type === 'tMax' && '< 5º', type === 'tMin' && '< -15º', type === 'precipit' && '< 10%'), /*#__PURE__*/React.createElement(Column, {\n    style: {\n      marginTop: 15,\n      padding: 0,\n      alignItems: 'flex-end',\n      color: '#f1f1f1'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 248,\n      columnNumber: 8\n    }\n  }, type === 'tMax' && '> 35º', type === 'tMin' && '> 15º', type === 'precipit' && '100%')))));\n}","map":{"version":3,"sources":["C:/Users/fhenriques/Documents/Rep/fe/src/components/Map/index.js"],"names":["React","useState","useEffect","Portugal","RadioSVGMap","useDispatch","useSelector","get","Forecast","MapDiv","Column","Row","locationCodes","Map","tooltipStyle","setToolTipStyle","display","pointedLocation","setPointedLocation","error","setError","probabPrecipit","setProbabPrecipit","tempMin","setTempMin","tempMax","setTempMax","dispatch","index","state","ipma","mapDay","type","typeView","asyncForEach","array","callback","length","storeData","tempObjectPrecipit","tempObjectMin","tempObjectMax","Object","keys","city","temp","then","data","precipt_str","min_str","max_str","parseInt","precipitaProb","tMin","tMax","catch","alignItems","el","name","event","handleLocationMouseOver","handleLocationMouseOut","handleLocationMouseMove","selectedNode","handleChange","backgroundColor","width","height","borderRadius","background","marginTop","padding","color"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport Portugal from './portugal';\r\nimport { RadioSVGMap } from 'react-svg-map';\r\nimport './style.scss';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { get } from '../../services/api';\r\nimport Forecast from '../Forecast';\r\nimport { MapDiv, Column, Row } from '../../style';\r\nimport { locationCodes } from '../../utils';\r\n\r\nexport default function Map() {\r\n\tconst [tooltipStyle, setToolTipStyle] = useState({ display: 'none' });\r\n\tconst [pointedLocation, setPointedLocation] = useState(null);\r\n\tconst [error, setError] = useState(false);\r\n\tconst [probabPrecipit, setProbabPrecipit] = useState(null);\r\n\tconst [tempMin, setTempMin] = useState(null);\r\n\tconst [tempMax, setTempMax] = useState(null);\r\n\r\n\tconst dispatch = useDispatch();\r\n\r\n\tconst index = useSelector((state) => {\r\n\t\treturn state.ipma.mapDay;\r\n\t});\r\n\r\n\tconst type = useSelector((state) => {\r\n\t\treturn state.ipma.typeView;\r\n\t});\r\n\r\n\tasync function asyncForEach(array, callback) {\r\n\t\tfor (let index = 0; index < array.length; index++) {\r\n\t\t\tawait callback(array[index], index, array);\r\n\t\t}\r\n\t}\r\n\r\n\tasync function storeData() {\r\n\t\tconst tempObjectPrecipit = {};\r\n\t\tconst tempObjectMin = {};\r\n\t\tconst tempObjectMax = {};\r\n\t\tawait asyncForEach(Object.keys(locationCodes), async function (city) {\r\n\t\t\tconst temp = await get(\r\n\t\t\t\t`http://api.ipma.pt/open-data/forecast/meteorology/cities/daily/${locationCodes[city]}.json`,\r\n\t\t\t\t{}\r\n\t\t\t)\r\n\t\t\t\t.then((data) => {\r\n\t\t\t\t\tlet precipt_str = '';\r\n\t\t\t\t\tlet min_str = '';\r\n\t\t\t\t\tlet max_str = '';\r\n\r\n\t\t\t\t\tif (parseInt(data.data[index].precipitaProb) < 10) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat0';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 20) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_10';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 30) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_20';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 40) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_30';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 50) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_40';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 60) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_50';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 70) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_60';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 80) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_70';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 90) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_80';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].precipitaProb) < 100) {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_90';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tprecipt_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_100';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (parseInt(data.data[index].tMin) < -15) {\r\n\t\t\t\t\t\tmin_str = 'svg-map__location svg-map__location--heat0';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < -12) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_10';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < -8) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_20';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < -3) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_30';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < 0) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_40';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < 3) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_50';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < 5) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_60';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < 8) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_70';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < 12) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_80';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMin) < 15) {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_90';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmin_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_blue_100';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif (parseInt(data.data[index].tMax) < 5) {\r\n\t\t\t\t\t\tmax_str = 'svg-map__location svg-map__location--heat0';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 10) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_10';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 15) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_20';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 20) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_30';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 22) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_40';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 25) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_50';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 28) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_60';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 30) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_70';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 32) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_80';\r\n\t\t\t\t\t} else if (parseInt(data.data[index].tMax) < 35) {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_90';\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tmax_str =\r\n\t\t\t\t\t\t\t'svg-map__location svg-map__location--heat_red_100';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn [precipt_str, min_str, max_str];\r\n\t\t\t\t})\r\n\t\t\t\t.catch((error) => {\r\n\t\t\t\t\treturn 'svg-map__location svg-map__location--heat0';\r\n\t\t\t\t});\r\n\t\t\ttempObjectPrecipit[city] = temp[0];\r\n\t\t\ttempObjectMin[city] = temp[1];\r\n\t\t\ttempObjectMax[city] = temp[2];\r\n\t\t});\r\n\t\tsetProbabPrecipit(tempObjectPrecipit);\r\n\t\tsetTempMin(tempObjectMin);\r\n\t\tsetTempMax(tempObjectMax);\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tstoreData();\r\n\t}, [index]);\r\n\r\n\treturn (\r\n\t\t<MapDiv>\r\n\t\t\t{probabPrecipit && tempMin && tempMax && (\r\n\t\t\t\t<Column style={{ alignItems: 'center' }}>\r\n\t\t\t\t\t<div className={'svg__block__map--pt'}>\r\n\t\t\t\t\t\t<RadioSVGMap\r\n\t\t\t\t\t\t\tmap={Portugal}\r\n\t\t\t\t\t\t\tlocationClassName={(el) => {\r\n\t\t\t\t\t\t\t\tif (type == 'precipit') {\r\n\t\t\t\t\t\t\t\t\treturn probabPrecipit[el.name];\r\n\t\t\t\t\t\t\t\t} else if (type == 'tMin') {\r\n\t\t\t\t\t\t\t\t\treturn tempMin[el.name];\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\treturn tempMax[el.name];\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonLocationMouseOver={(event) => {\r\n\t\t\t\t\t\t\t\thandleLocationMouseOver(\r\n\t\t\t\t\t\t\t\t\tevent,\r\n\t\t\t\t\t\t\t\t\tsetPointedLocation,\r\n\t\t\t\t\t\t\t\t\tdispatch\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonLocationMouseOut={() => {\r\n\t\t\t\t\t\t\t\thandleLocationMouseOut(\r\n\t\t\t\t\t\t\t\t\tsetPointedLocation,\r\n\t\t\t\t\t\t\t\t\tsetToolTipStyle\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonLocationMouseMove={(event) => {\r\n\t\t\t\t\t\t\t\thandleLocationMouseMove(event, setToolTipStyle);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\tonChange={(selectedNode) => {\r\n\t\t\t\t\t\t\t\thandleChange(\r\n\t\t\t\t\t\t\t\t\tselectedNode,\r\n\t\t\t\t\t\t\t\t\tsetPointedLocation,\r\n\t\t\t\t\t\t\t\t\tdispatch\r\n\t\t\t\t\t\t\t\t);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\tclassName='svg__block__map__tooltip'\r\n\t\t\t\t\t\t\tstyle={tooltipStyle}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{pointedLocation && (\r\n\t\t\t\t\t\t\t\t<Forecast\r\n\t\t\t\t\t\t\t\t\tpointedLocation={pointedLocation}\r\n\t\t\t\t\t\t\t\t\tstyle={{ backgroundColor: '#21255690' }}\r\n\t\t\t\t\t\t\t\t\tsm\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div\r\n\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\twidth: '75%',\r\n\t\t\t\t\t\t\theight: 10,\r\n\t\t\t\t\t\t\tborderRadius: 5,\r\n\t\t\t\t\t\t\tbackground:\r\n\t\t\t\t\t\t\t\ttype === 'tMax'\r\n\t\t\t\t\t\t\t\t\t? 'linear-gradient(to right, #f1f1f1, rgb(255, 11, 11), rgb(87, 0, 0))'\r\n\t\t\t\t\t\t\t\t\t: 'linear-gradient(to right, #f1f1f1, rgb(0, 89, 255), rgb(0, 26, 75))',\r\n\t\t\t\t\t\t\tmarginTop: 10,\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t<Row>\r\n\t\t\t\t\t\t\t<Column\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmarginTop: 15,\r\n\t\t\t\t\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\t\t\t\t\talignItems: 'flex-start',\r\n\t\t\t\t\t\t\t\t\tcolor: '#f1f1f1',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{type === 'tMax' && '< 5º'}\r\n\t\t\t\t\t\t\t\t{type === 'tMin' && '< -15º'}\r\n\t\t\t\t\t\t\t\t{type === 'precipit' && '< 10%'}\r\n\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t\t<Column\r\n\t\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\t\tmarginTop: 15,\r\n\t\t\t\t\t\t\t\t\tpadding: 0,\r\n\t\t\t\t\t\t\t\t\talignItems: 'flex-end',\r\n\t\t\t\t\t\t\t\t\tcolor: '#f1f1f1',\r\n\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t{type === 'tMax' && '> 35º'}\r\n\t\t\t\t\t\t\t\t{type === 'tMin' && '> 15º'}\r\n\t\t\t\t\t\t\t\t{type === 'precipit' && '100%'}\r\n\t\t\t\t\t\t\t</Column>\r\n\t\t\t\t\t\t</Row>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</Column>\r\n\t\t\t)}\r\n\t\t</MapDiv>\r\n\t);\r\n}\r\n"]},"metadata":{},"sourceType":"module"}